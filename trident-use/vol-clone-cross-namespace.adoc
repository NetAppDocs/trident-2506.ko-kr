---
sidebar: sidebar 
permalink: trident-use/vol-clone-cross-namespace.html 
keywords: volref, volume reference, clone, pvc, pv, namespace, cvna, cross-namespace, sharing, volumesnapshots 
summary: Trident 사용하면 동일한 K8s 클러스터 내의 다른 네임스페이스에서 기존 볼륨이나 볼륨 스냅샷을 사용하여 새 볼륨을 만들 수 있습니다. 
---
= 네임스페이스 전체에서 볼륨 복제
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Trident 사용하면 동일한 Kubernetes 클러스터 내의 다른 네임스페이스에서 기존 볼륨이나 볼륨 스냅샷을 사용하여 새 볼륨을 만들 수 있습니다.



== 필수 조건

볼륨을 복제하기 전에 소스 및 대상 백엔드가 동일한 유형이고 동일한 스토리지 클래스를 가지고 있는지 확인하세요.


NOTE: 네임스페이스 간 복제는 다음에 대해서만 지원됩니다. `ontap-san` 그리고 `ontap-nas` 스토리지 드라이버. 읽기 전용 복제본은 지원되지 않습니다.



== 빠른 시작

몇 단계만 거치면 볼륨 복제를 설정할 수 있습니다.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["하나"]볼륨을 복제하기 위해 소스 PVC를 구성합니다.
[role="quick-margin-para"]
소스 네임스페이스 소유자는 소스 PVC의 데이터에 액세스할 수 있는 권한을 부여합니다.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["둘"]대상 네임스페이스에 CR을 생성할 수 있는 권한을 부여합니다.
[role="quick-margin-para"]
클러스터 관리자는 대상 네임스페이스 소유자에게 TridentVolumeReference CR을 생성할 수 있는 권한을 부여합니다.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["삼"]대상 네임스페이스에 TridentVolumeReference를 생성합니다.
[role="quick-margin-para"]
대상 네임스페이스의 소유자는 소스 PVC를 참조하기 위해 TridentVolumeReference CR을 생성합니다.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-4.png["네"]대상 네임스페이스에 복제 PVC를 만듭니다.
[role="quick-margin-para"]
대상 네임스페이스의 소유자는 소스 네임스페이스에서 PVC를 복제하기 위해 PVC를 생성합니다.



== 소스 및 대상 네임스페이스 구성

보안을 보장하려면 네임스페이스 간에 볼륨을 복제하려면 소스 네임스페이스 소유자, 클러스터 관리자, 대상 네임스페이스 소유자의 협업과 조치가 필요합니다.  각 단계마다 사용자 역할이 지정됩니다.

.단계
. *소스 네임스페이스 소유자:* PVC를 생성합니다.(`pvc1` ) 소스 네임스페이스에서(`namespace1` ) 대상 네임스페이스와 공유할 수 있는 권한을 부여합니다.(`namespace2` )를 사용하여 `cloneToNamespace` 주석.
+
[source, yaml]
----
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: pvc1
  namespace: namespace1
  annotations:
    trident.netapp.io/cloneToNamespace: namespace2
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: trident-csi
  resources:
    requests:
      storage: 100Gi
----
+
Trident PV와 백엔드 스토리지 볼륨을 생성합니다.

+
[NOTE]
====
** 쉼표로 구분된 목록을 사용하여 PVC를 여러 네임스페이스에 공유할 수 있습니다.  예를 들어, `trident.netapp.io/cloneToNamespace: namespace2,namespace3,namespace4` .
** 다음을 사용하여 모든 네임스페이스에 공유할 수 있습니다. `*` .  예를 들어, `trident.netapp.io/cloneToNamespace: *`
** PVC를 업데이트하여 다음을 포함할 수 있습니다. `cloneToNamespace` 언제든지 주석을 달 수 있습니다.


====
. *클러스터 관리자:* 대상 네임스페이스 소유자에게 대상 네임스페이스에서 TridentVolumeReference CR을 생성할 수 있는 권한을 부여하기 위해 적절한 RBAC가 있는지 확인하십시오.(`namespace2` ).
. *대상 네임스페이스 소유자:* 소스 네임스페이스를 참조하는 대상 네임스페이스에 TridentVolumeReference CR을 생성합니다. `pvc1` .
+
[source, yaml]
----
apiVersion: trident.netapp.io/v1
kind: TridentVolumeReference
metadata:
  name: my-first-tvr
  namespace: namespace2
spec:
  pvcName: pvc1
  pvcNamespace: namespace1
----
. *대상 네임스페이스 소유자:* PVC 생성(`pvc2` ) 대상 네임스페이스에(`namespace2` )를 사용하여 `cloneFromPVC` 또는 `cloneFromSnapshot` , 그리고 `cloneFromNamespace` 소스 PVC를 지정하는 주석입니다.
+
[source, yaml]
----
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  annotations:
    trident.netapp.io/cloneFromPVC: pvc1
    trident.netapp.io/cloneFromNamespace: namespace1
  name: pvc2
  namespace: namespace2
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: trident-csi
  resources:
    requests:
      storage: 100Gi
----




== 제한 사항

* ontap-nas-economy 드라이버를 사용하여 프로비저닝된 PVC의 경우 읽기 전용 복제본은 지원되지 않습니다.

