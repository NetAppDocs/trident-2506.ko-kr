---
sidebar: sidebar 
permalink: trident-use/trident-fsx-examples.html 
keywords: map backends, storage classes, trident backend, ontap-nas, ontap-nas-economy, ontap-nas-flexgroups, options, storageclasses, fsx 
summary: Amazon FSx for ONTAP 의 백엔드 구성 옵션에 대해 알아보세요.  이 섹션에서는 백엔드 구성 예를 제공합니다. 
---
= FSx for ONTAP 구성 옵션 및 예제
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Amazon FSx for ONTAP 의 백엔드 구성 옵션에 대해 알아보세요.  이 섹션에서는 백엔드 구성 예를 제공합니다.



== 백엔드 구성 옵션

백엔드 구성 옵션은 다음 표를 참조하세요.

[cols="3"]
|===
| 매개변수 | 설명 | 예 


| `version` |  | 항상 1 


| `storageDriverName` | 저장 드라이버의 이름 | `ontap-nas`, `ontap-nas-economy` , `ontap-nas-flexgroup` , `ontap-san` , `ontap-san-economy` 


| `backendName` | 사용자 정의 이름 또는 스토리지 백엔드 | 드라이버 이름 + "_" + dataLIF 


| `managementLIF` | 클러스터 또는 SVM 관리 LIF의 IP 주소, 정규화된 도메인 이름(FQDN)을 지정할 수 있습니다.  IPv6 플래그를 사용하여 Trident 설치한 경우 IPv6 주소를 사용하도록 설정할 수 있습니다.  IPv6 주소는 [28e8:d9fb:a825:b7bf:69a8:d02f:9e7b:3555]와 같이 대괄호로 정의해야 합니다. | "10.0.0.1", "[2001:1234:abcd::fefe]" 


| `dataLIF` | 프로토콜 LIF의 IP 주소.  * ONTAP NAS 드라이버*: NetApp dataLIF를 지정하는 것을 권장합니다.  제공되지 않으면 Trident SVM에서 dataLIF를 가져옵니다.  NFS 마운트 작업에 사용할 정규화된 도메인 이름(FQDN)을 지정하면 라운드 로빈 DNS를 만들어 여러 dataLIF에 걸쳐 부하를 분산할 수 있습니다.  초기 설정 후 변경이 가능합니다. 참조하다 .  * ONTAP SAN 드라이버*: iSCSI에 대해서는 지정하지 마세요.  Trident ONTAP Selective LUN Map을 사용하여 다중 경로 세션을 설정하는 데 필요한 iSCI LIF를 검색합니다.  dataLIF가 명시적으로 정의된 경우 경고가 생성됩니다.  IPv6 플래그를 사용하여 Trident 설치한 경우 IPv6 주소를 사용하도록 설정할 수 있습니다.  IPv6 주소는 [28e8:d9fb:a825:b7bf:69a8:d02f:9e7b:3555]와 같이 대괄호로 정의해야 합니다. |  


| `autoExportPolicy` | 자동 내보내기 정책 생성 및 업데이트 활성화[부울]  를 사용하여 `autoExportPolicy` 그리고 `autoExportCIDRs` 옵션을 통해 Trident 자동으로 내보내기 정책을 관리할 수 있습니다. | `false` 


| `autoExportCIDRs` | Kubernetes 노드 IP를 필터링할 CIDR 목록 `autoExportPolicy` 활성화되어 있습니다.  를 사용하여 `autoExportPolicy` 그리고 `autoExportCIDRs` 옵션을 통해 Trident 자동으로 내보내기 정책을 관리할 수 있습니다. | "["0.0.0.0/0", "::/0"]" 


| `labels` | 볼륨에 적용할 임의의 JSON 형식 레이블 세트 | "" 


| `clientCertificate` | 클라이언트 인증서의 Base64로 인코딩된 값입니다.  인증서 기반 인증에 사용됨 | "" 


| `clientPrivateKey` | 클라이언트 개인 키의 Base64 인코딩된 값입니다.  인증서 기반 인증에 사용됨 | "" 


| `trustedCACertificate` | 신뢰할 수 있는 CA 인증서의 Base64로 인코딩된 값입니다. 선택 과목.  인증서 기반 인증에 사용됩니다. | "" 


| `username` | 클러스터 또는 SVM에 연결할 사용자 이름입니다. 자격 증명 기반 인증에 사용됩니다.  예를 들어, vsadmin. |  


| `password` | 클러스터 또는 SVM에 연결하기 위한 비밀번호입니다. 자격 증명 기반 인증에 사용됩니다. |  


| `svm` | 사용할 스토리지 가상 머신 | SVM managementLIF가 지정된 경우 파생됩니다. 


| `storagePrefix` | SVM에서 새로운 볼륨을 프로비저닝할 때 사용되는 접두사입니다.  생성 후에는 수정할 수 없습니다.  이 매개변수를 업데이트하려면 새로운 백엔드를 만들어야 합니다. | `trident` 


| `limitAggregateUsage` | * Amazon FSx for NetApp ONTAP 에 대해서는 지정하지 마세요.*  제공된 `fsxadmin` 그리고 `vsadmin` Trident 사용하여 집계 사용량을 검색하고 제한하는 데 필요한 권한이 포함되어 있지 않습니다. | 사용하지 마세요. 


| `limitVolumeSize` | 요청된 볼륨 크기가 이 값보다 크면 프로비저닝에 실패합니다. 또한 qtree 및 LUN에 대해 관리하는 볼륨의 최대 크기를 제한합니다. `qtreesPerFlexvol` 옵션을 사용하면 FlexVol volume 당 최대 Qtree 수를 사용자 지정할 수 있습니다. | "" (기본적으로 적용되지 않음) 


| `lunsPerFlexvol` | Flexvol당 최대 LUN은 [50, 200] 범위 내에 있어야 합니다.  SAN만 해당. | `100` 


| `debugTraceFlags` | 문제 해결 시 사용할 디버그 플래그입니다.  예를 들어, {"api":false, "method":true} 사용하지 마십시오. `debugTraceFlags` 문제 해결을 위해 자세한 로그 덤프가 필요한 경우가 아니면요. | 널 


| `nfsMountOptions` | 쉼표로 구분된 NFS 마운트 옵션 목록입니다.  Kubernetes 지속형 볼륨의 마운트 옵션은 일반적으로 스토리지 클래스에 지정되지만, 스토리지 클래스에 마운트 옵션이 지정되지 않은 경우 Trident 는 스토리지 백엔드의 구성 파일에 지정된 마운트 옵션을 사용합니다.  스토리지 클래스나 구성 파일에 마운트 옵션이 지정되지 않은 경우 Trident 연관된 영구 볼륨에 마운트 옵션을 설정하지 않습니다. | "" 


| `nasType` | NFS 또는 SMB 볼륨 생성을 구성합니다.  옵션은 다음과 같습니다 `nfs` , `smb` , 또는 null.  *설정해야 합니다 `smb` SMB 볼륨의 경우.*  null로 설정하면 기본적으로 NFS 볼륨이 사용됩니다. | `nfs` 


| `qtreesPerFlexvol` | FlexVol 당 최대 Qtree는 [50, 300] 범위 내에 있어야 합니다. | `200` 


| `smbShare` | 다음 중 하나를 지정할 수 있습니다. Microsoft Management Console이나 ONTAP CLI를 사용하여 만든 SMB 공유의 이름 또는 Trident SMB 공유를 만들 수 있도록 하는 이름입니다.  이 매개변수는 Amazon FSx for ONTAP 백엔드에 필요합니다. | `smb-share` 


| `useREST` | ONTAP REST API를 사용하기 위한 부울 매개변수입니다.  `useREST`설정 시 `true` , Trident 백엔드와 통신하기 위해 ONTAP REST API를 사용합니다. `false` Trident 백엔드와 통신하기 위해 ONTAPI(ZAPI) 호출을 사용합니다. 이 기능을 사용하려면 ONTAP 9.11.1 이상이 필요합니다.  또한, 사용되는 ONTAP 로그인 역할에는 다음에 대한 액세스 권한이 있어야 합니다. `ontapi` 애플리케이션.  이는 사전 정의된 것에 의해 충족됩니다. `vsadmin` 그리고 `cluster-admin` 역할.  Trident 24.06 릴리스 및 ONTAP 9.15.1 이상부터 `useREST` 로 설정됩니다 `true` 기본적으로; 변경 `useREST` 에게 `false` ONTAPI(ZAPI) 호출을 사용합니다. | `true`ONTAP 9.15.1 이상인 경우, 그렇지 않은 경우 `false` . 


| `aws` | AWS FSx for ONTAP 의 구성 파일에서 다음을 지정할 수 있습니다. `fsxFilesystemID` : AWS FSx 파일 시스템의 ID를 지정합니다.  - `apiRegion` : AWS API 지역 이름.  - `apikey` : AWS API 키.  - `secretKey` : AWS 비밀 키. | ``
`` 
`""`
`""`
`""` 


| `credentials` | AWS Secrets Manager에 저장할 FSx SVM 자격 증명을 지정합니다.  - `name` : SVM의 자격 증명을 포함하는 비밀의 Amazon 리소스 이름(ARN)입니다.  - `type` : 설정 `awsarn` .  참조하다link:https://docs.aws.amazon.com/secretsmanager/latest/userguide/create_secret.html["AWS Secrets Manager 비밀 만들기"^] 자세한 내용은. |  
|===


=== 업데이트 `dataLIF` 초기 구성 후

다음 명령을 실행하여 업데이트된 dataLIF로 새 백엔드 JSON 파일을 제공하면 초기 구성 후 dataLIF를 변경할 수 있습니다.

[source, console]
----
tridentctl update backend <backend-name> -f <path-to-backend-json-file-with-updated-dataLIF>
----

NOTE: PVC가 하나 이상의 포드에 연결된 경우 새로운 dataLIF가 적용되려면 해당 포드를 모두 내렸다가 다시 올려야 합니다.



== 볼륨 프로비저닝을 위한 백엔드 구성 옵션

다음 옵션을 사용하여 기본 프로비저닝을 제어할 수 있습니다. `defaults` 구성 섹션.  예를 들어, 아래의 구성 예를 참조하세요.

[cols="3"]
|===
| 매개변수 | 설명 | 기본 


| `spaceAllocation` | LUN에 대한 공간 할당 | `true` 


| `spaceReserve` | 공간 예약 모드; "없음"(씬) 또는 "볼륨"(두꺼움) | `none` 


| `snapshotPolicy` | 사용할 스냅샷 정책 | `none` 


| `qosPolicy` | 생성된 볼륨에 할당할 QoS 정책 그룹입니다.  스토리지 풀 또는 백엔드별로 qosPolicy 또는 adaptiveQosPolicy 중 하나를 선택합니다.  Trident 에서 QoS 정책 그룹을 사용하려면 ONTAP 9.8 이상이 필요합니다.  공유되지 않는 QoS 정책 그룹을 사용해야 하며, 정책 그룹이 각 구성 요소에 개별적으로 적용되도록 해야 합니다.  공유 QoS 정책 그룹은 모든 작업 부하의 총 처리량에 대한 상한을 적용합니다. | "" 


| `adaptiveQosPolicy` | 생성된 볼륨에 할당할 적응형 QoS 정책 그룹입니다.  스토리지 풀 또는 백엔드별로 qosPolicy 또는 adaptiveQosPolicy 중 하나를 선택합니다.  ontap-nas-economy에서 지원되지 않습니다. | "" 


| `snapshotReserve` | 스냅샷에 예약된 볼륨의 백분율 "0" | 만약에 `snapshotPolicy` ~이다 `none` , `else` "" 


| `splitOnClone` | 생성 시 부모로부터 복제본을 분할합니다. | `false` 


| `encryption` | 새 볼륨에서 NetApp 볼륨 암호화(NVE)를 활성화합니다. 기본값은 다음과 같습니다. `false` .  이 옵션을 사용하려면 클러스터에서 NVE에 대한 라이선스를 받고 활성화해야 합니다.  백엔드에서 NAE가 활성화된 경우 Trident 에서 프로비저닝된 모든 볼륨은 NAE가 활성화됩니다.  자세한 내용은 다음을 참조하세요.link:../trident-reco/security-reco.html["Trident NVE 및 NAE와 함께 작동하는 방식"] . | `false` 


| `luksEncryption` | LUKS 암호화를 활성화합니다. 참조하다link:../trident-reco/security-reco.html#Use-Linux-Unified-Key-Setup-(LUKS)["Linux Unified Key Setup(LUKS) 사용"] .  SAN만 해당. | "" 


| `tieringPolicy` | 사용할 계층화 정책	`none` |  


| `unixPermissions` | 새로운 볼륨에 대한 모드입니다.  *SMB 볼륨의 경우 비워 두세요.* | "" 


| `securityStyle` | 새로운 볼륨에 대한 보안 스타일입니다.  NFS 지원 `mixed` 그리고 `unix` 보안 스타일.  SMB 지원 `mixed` 그리고 `ntfs` 보안 스타일. | NFS 기본값은 `unix` .  SMB 기본값은 `ntfs` . 
|===


== 구성 예

.SMB 볼륨에 대한 스토리지 클래스 구성
[%collapsible]
====
사용 중 `nasType` , `node-stage-secret-name` , 그리고 `node-stage-secret-namespace` SMB 볼륨을 지정하고 필요한 Active Directory 자격 증명을 제공할 수 있습니다.  SMB 볼륨은 다음을 사용하여 지원됩니다. `ontap-nas` 운전자만.

[source, yaml]
----
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: nas-smb-sc
provisioner: csi.trident.netapp.io
parameters:
  backendType: "ontap-nas"
  trident.netapp.io/nasType: "smb"
  csi.storage.k8s.io/node-stage-secret-name: "smbcreds"
  csi.storage.k8s.io/node-stage-secret-namespace: "default"
----
====
.Secrets Manager를 사용한 AWS FSx for ONTAP 구성
[%collapsible]
====
[source, yaml]
----
apiVersion: trident.netapp.io/v1
kind: TridentBackendConfig
metadata:
  name: backend-tbc-ontap-nas
spec:
  version: 1
  storageDriverName: ontap-nas
  backendName: tbc-ontap-nas
  svm: svm-name
  aws:
    fsxFilesystemID: fs-xxxxxxxxxx
  managementLIF:
  credentials:
    name: "arn:aws:secretsmanager:us-west-2:xxxxxxxx:secret:secret-name"
    type: awsarn
----
====