---
sidebar: sidebar 
permalink: trident-get-started/kubernetes-deploy.html 
keywords: deploy, Trident, methods, operator, tridentctl, helm, tanzu, vmware 
summary: 'Trident 운영자(수동 또는 Helm 사용)를 사용하거나 다음을 사용하여 Trident 설치할 수 있습니다. `tridentctl` .  이 주제에서는 귀하에게 적합한 설치 프로세스를 선택하는 데 중요한 정보를 제공합니다.' 
---
= Trident 설치에 대해 알아보세요
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NetApp Trident 다양한 환경과 조직에 설치할 수 있도록 여러 가지 설치 옵션을 제공합니다.  Trident 운영자(수동 또는 Helm 사용)를 사용하거나 다음을 사용하여 Trident 설치할 수 있습니다. `tridentctl` .  이 주제에서는 귀하에게 적합한 설치 프로세스를 선택하는 데 중요한 정보를 제공합니다.



== Trident 25.06에 대한 중요 정보

* Trident 에 대한 다음의 중요 정보를 꼭 읽어보세요.*

.<strong> Trident 에 대한 중요 정보</strong>
[%collapsible%open]
====
[]
=====
* Kubernetes 1.34가 이제 Trident 에서 지원됩니다. Kubernetes를 업그레이드하기 전에 Trident 업그레이드하세요.
* Trident SAN 환경에서 다중 경로 구성 사용을 엄격하게 시행하며 권장 값은 다음과 같습니다. `find_multipaths: no` multipath.conf 파일에서.
+
비다중경로 구성 사용 또는 사용 `find_multipaths: yes` 또는 `find_multipaths: smart` multipath.conf 파일의 값으로 인해 마운트가 실패합니다.  Trident 다음을 사용할 것을 권장했습니다. `find_multipaths: no` 21.07 릴리스 이후.



=====
====


== 시작하기 전에

설치 경로에 관계없이 다음이 필요합니다.

* 지원되는 Kubernetes 버전을 실행하고 기능 요구 사항이 활성화된 지원되는 Kubernetes 클러스터에 대한 모든 권한입니다.  검토하다link:requirements.html["요구 사항"] 자세한 내용은.
* 지원되는 NetApp 스토리지 시스템에 액세스합니다.
* 모든 Kubernetes 워커 노드에서 볼륨을 마운트하는 기능.
* Linux 호스트 `kubectl` (또는 `oc` (OpenShift를 사용하는 경우) 사용하려는 Kubernetes 클러스터를 관리하도록 설치 및 구성해야 합니다.
* 그만큼 `KUBECONFIG` Kubernetes 클러스터 구성을 가리키도록 환경 변수를 설정합니다.
* Docker Enterprise와 함께 Kubernetes를 사용하는 경우 https://docs.docker.com/ee/ucp/user-access/cli/["CLI 액세스를 활성화하려면 해당 단계를 따르세요."^] .
* 클러스터는 특권 워크로드를 지원해야 합니다.



TIP: 만약 당신이 그것에 익숙하지 않다면link:../trident-get-started/intro.html["기본 개념"^] , 지금이 그럴 좋은 시기입니다.



== 설치 방법을 선택하세요

귀하에게 적합한 설치 방법을 선택하세요.  또한 다음 고려 사항을 검토해야 합니다.link:kubernetes-deploy.html#move-between-installation-methods["방법 간 이동"] 결정을 내리기 전에.



=== Trident 연산자 사용

수동으로 배포하든 Helm을 사용하든, Trident Operator는 설치를 간소화하고 Trident 리소스를 동적으로 관리하는 좋은 방법입니다.  당신은 심지어 할 수 있습니다link:../trident-get-started/kubernetes-customize-deploy.html["Trident 운영자 배포를 사용자 지정하세요"] 속성을 사용하여 `TridentOrchestrator` 사용자 정의 리소스(CR).

Trident 연산자를 사용하면 다음과 같은 이점이 있습니다.

.<strong> Trident 객체 생성</strong>
[%collapsible]
====
Trident 운영자는 Kubernetes 버전에 대해 다음 객체를 자동으로 생성합니다.

* 운영자를 위한 ServiceAccount
* ServiceAccount에 대한 ClusterRole 및 ClusterRoleBinding
* 전용 PodSecurityPolicy(Kubernetes 1.25 이하 버전용)
* 운영자 자신


====
.<strong>자원 책임성</strong>
[%collapsible]
====
클러스터 범위의 Trident 운영자는 클러스터 수준에서 Trident 설치와 관련된 리소스를 관리합니다.  이렇게 하면 네임스페이스 범위 연산자를 사용하여 클러스터 범위 리소스를 유지 관리할 때 발생할 수 있는 오류가 완화됩니다.  이는 자가치유와 패치에 필수적입니다.

====
.<strong>자가치유 능력</strong>
[%collapsible]
====
운영자는 Trident 설치를 모니터링하고 배포가 삭제되거나 실수로 수정되는 경우와 같은 문제를 해결하기 위한 조치를 적극적으로 취합니다.  에이 `trident-operator-<generated-id>` 포드가 생성되어 연결됩니다. `TridentOrchestrator` Trident 설치된 CR.  이렇게 하면 클러스터에 Trident 인스턴스가 하나만 존재하고 해당 설정이 제어되어 설치가 멱등하게 이루어집니다.  설치에 변경 사항이 발생하면(예: 배포 또는 노드 데몬셋 삭제) 운영자는 해당 변경 사항을 식별하여 개별적으로 수정합니다.

====
.<strong>기존 설치에 대한 간편한 업데이트</strong>
[%collapsible]
====
운영자를 통해 기존 배포를 쉽게 업데이트할 수 있습니다.  편집만 하면 됩니다 `TridentOrchestrator` CR을 사용하여 설치를 업데이트합니다.

예를 들어, Trident 활성화하여 디버그 로그를 생성해야 하는 시나리오를 생각해 보겠습니다.  이렇게 하려면 패치를 적용하세요. `TridentOrchestrator` 설정하다 `spec.debug` 에게 `true` :

[listing]
----
kubectl patch torc <trident-orchestrator-name> -n trident --type=merge -p '{"spec":{"debug":true}}'
----
후에 `TridentOrchestrator` 업데이트가 되면 운영자는 업데이트를 처리하고 기존 설치에 패치를 적용합니다.  이로 인해 설치를 적절히 수정하기 위해 새로운 포드가 생성될 수 있습니다.

====
.<strong>깨끗하게 재설치</strong>
[%collapsible]
====
클러스터 범위 Trident 연산자를 사용하면 클러스터 범위 리소스를 깔끔하게 제거할 수 있습니다.  사용자는 Trident 완전히 제거하고 쉽게 다시 설치할 수 있습니다.

====
.<strong>자동 Kubernetes 업그레이드 처리</strong>
[%collapsible]
====
클러스터의 Kubernetes 버전이 지원되는 버전으로 업그레이드되면 운영자는 기존 Trident 설치를 자동으로 업데이트하고 Kubernetes 버전의 요구 사항을 충족하도록 변경합니다.


NOTE: 클러스터가 지원되지 않는 버전으로 업그레이드되면 운영자는 Trident 설치를 방지합니다.  Trident 이미 운영자와 함께 설치된 경우, Trident 가 지원되지 않는 Kubernetes 버전에 설치되었음을 나타내는 경고가 표시됩니다.

====


=== 사용 중 `tridentctl`

업그레이드해야 하는 기존 배포가 있거나 배포를 고도로 사용자 지정하려는 경우 다음을 고려해야 합니다. .  이는 Trident 배치하는 기존 방법입니다.

당신은 할 수 있습니다 Trident 리소스에 대한 매니페스트를 생성합니다.  여기에는 배포, 데몬셋, 서비스 계정, Trident 설치 과정에서 생성하는 클러스터 역할이 포함됩니다.


NOTE: 22.04 릴리스부터 Trident 설치할 때마다 AES 키가 다시 생성되지 않습니다.  이번 릴리스에서는 Trident 여러 설치 환경에서 유지되는 새로운 비밀 객체를 설치합니다.  이는 다음을 의미합니다. `tridentctl` 22.04에서는 이전 버전의 Trident 제거할 수 있지만, 이전 버전에서는 22.04 설치를 제거할 수 없습니다.  적절한 설치 방법을 선택하세요.



== 설치 모드를 선택하세요

귀하의 조직에 필요한 _설치 모드_(표준, 오프라인 또는 원격)에 따라 배포 프로세스를 결정하세요.

[role="tabbed-block"]
====
.표준 설치
--
이것은 Trident 설치하는 가장 쉬운 방법이며 네트워크 제한을 두지 않는 대부분의 환경에서 작동합니다.  표준 설치 모드는 기본 레지스트리를 사용하여 필요한 Trident 저장합니다.(`docker.io` ) 및 CSI(`registry.k8s.io` ) 이미지.

표준 모드를 ​​사용하면 Trident 설치 프로그램은 다음을 수행합니다.

* 인터넷을 통해 컨테이너 이미지를 가져옵니다.
* Kubernetes 클러스터의 모든 적격 노드에서 Trident Pod를 시작하는 배포 또는 노드 데몬셋을 생성합니다.


--
.오프라인 설치
--
공기가 차단된 곳이나 안전한 곳에서는 오프라인 설치 모드가 필요할 수 있습니다.  이 시나리오에서는 필요한 Trident 및 CSI 이미지를 저장하기 위해 하나의 개인 미러링 레지스트리 또는 두 개의 미러링 레지스트리를 만들 수 있습니다.


NOTE: 레지스트리 구성에 관계없이 CSI 이미지는 하나의 레지스트리에 있어야 합니다.

--
.원격 설치
--
원격 설치 프로세스에 대한 간략한 개요는 다음과 같습니다.

* 적절한 버전을 배포하세요 `kubectl` Trident 배포하려는 원격 컴퓨터에서.
* Kubernetes 클러스터에서 구성 파일을 복사하고 설정하세요. `KUBECONFIG` 원격 컴퓨터의 환경 변수.
* 시작하다 `kubectl get nodes` 필요한 Kubernetes 클러스터에 연결할 수 있는지 확인하는 명령입니다.
* 표준 설치 단계를 사용하여 원격 컴퓨터에서 배포를 완료합니다.


--
====


== 귀하의 방법과 모드에 따라 프로세스를 선택하세요

결정을 내린 후 적절한 프로세스를 선택하세요.

[cols="2"]
|===
| 방법 | 설치 모드 


| Trident 오퍼레이터(수동)  a| 
link:kubernetes-deploy-operator.html["표준 설치"]

link:kubernetes-deploy-operator-mirror.html["오프라인 설치"]



| Trident 오퍼레이터(헬름)  a| 
link:kubernetes-deploy-helm.html["표준 설치"]

link:kubernetes-deploy-helm-mirror.html["오프라인 설치"]



| `tridentctl`  a| 
link:kubernetes-deploy-tridentctl.html["표준 또는 오프라인 설치"]

|===


== 설치 방법 간 이동

설치 방법을 변경하기로 결정할 수 있습니다.  그렇게 하기 전에 다음 사항을 고려하세요.

* Trident 설치하고 제거할 때는 항상 동일한 방법을 사용하세요.  당신이 다음과 같이 배치된 경우 `tridentctl` , 적절한 버전을 사용해야 합니다. `tridentctl` Trident 제거하기 위한 바이너리입니다.  마찬가지로 운영자를 사용하여 배포하는 경우 다음을 편집해야 합니다. `TridentOrchestrator` CR 및 세트 `spec.uninstall=true` Trident 제거하려면.
* 제거하고 대신 사용하려는 운영자 기반 배포가 있는 경우 `tridentctl` Trident 배포하려면 먼저 편집해야 합니다. `TridentOrchestrator` 그리고 설정하다 `spec.uninstall=true` Trident 제거하려면.  그런 다음 삭제하세요 `TridentOrchestrator` 그리고 운영자 배치.  그런 다음 다음을 사용하여 설치할 수 있습니다. `tridentctl` .
* 수동 운영자 기반 배포가 있고 Helm 기반 Trident 운영자 배포를 사용하려는 경우 먼저 운영자를 수동으로 제거한 다음 Helm을 설치해야 합니다. 이를 통해 Helm은 필요한 레이블과 주석을 사용하여 Trident 연산자를 배포할 수 있습니다. 이렇게 하지 않으면 Helm 기반 Trident 운영자 배포가 실패하고 레이블 검증 오류와 주석 검증 오류가 발생합니다.
* 만약 당신이 가지고 있다면 `tridentctl` 기반 배포를 사용하면 Trident 제거하지 않고도 Helm 기반 또는 Operator 기반 배포를 수행할 수 있습니다.




== 기타 알려진 구성 옵션

VMWare Tanzu Portfolio 제품에 Trident 설치하는 경우:

* 그만큼 `--kubelet-dir` 플래그는 kubelet 디렉토리의 위치로 설정되어야 합니다.  기본적으로 이것은 `/var/vcap/data/kubelet` .
+
다음을 사용하여 kubelet 위치 지정 `--kubelet-dir` Trident Operator, Helm에서 일하는 것으로 알려져 있습니다. `tridentctl` 배치.


